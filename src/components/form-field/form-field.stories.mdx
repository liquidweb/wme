import { ArgsTable, Story, Canvas, Meta } from "@storybook/addon-docs";
import Grid from "@mui/material/Grid";
import Button from "../button";
import FormField from "./";
import InputLabel from "../input-label";
import TextInput from "../text-input";

<Meta
  title="Forms/FormField"
  component={FormField}
  argTypes={{
    children: {
      description: "React node(s) that you would like ",
    },
    error: {
      control: "boolean",
      description: "True/false value for displaying an error",
    },
    errorMessage: {
      control: "text",
      description: "The message to display when the field is invalid.",
    },
    helperText: {
      control: "text",
      description: "Optional text to display under input field.",
    },
    id: {
      control: "text",
      description: "The id of the input element.",
    },
    label: {
      control: "text",
      description: "Input label text",
    },
    name: {
      control: "text",
      description: "Name attribute of the input element.",
    },
  }}
/>

export const Template = (args) => <FormField {...args} />;

# Form Field

Composes `FormControl`, `InputLabel`, `InputError`, and `InputHelperText` to create a single, re-usable "field" component.

**_Note:_** Any additional props passed to this component will be passed to <a href="https://mui.com/base/react-form-control/" target="_blank">MUI's FormControlUnstyled</a>, so you can use any prop provided there.

## Custom Form Fields

If you would like to create a "custom" form field, you can use any combination of the props provided, OR provide a child that completely overwrites the default template.

If you provide your own children, they will be wrapped in a `FormControl` (aka <a href="https://mui.com/base/react-form-control/" target="_blank">FormControlUnstyled</a>) component. This allows you to access the <a href="https://mui.com/base/react-form-control/#useformcontrolunstyledcontext-hook" target="_blank">useFormControlUnstyledContext</a> hook to enable integration between custom form inputs and FormControlUnstyled. You can also use it to read the form control's state and react to its changes in a custom component.

## Props

<ArgsTable story="." />

## Example

```
import React, { useState } from 'react';
import { FormField, TextInput } from '@moderntribe/wme';

export const MyFormField = (props) => (
  const fieldId = "field-id";

  <FormField
    errorMessage="This field is required"
    field={<TextInput id={fieldId} />}
    helperText="The Doors of Durin, also known as the West-gate, the West-door of Moria, or Elven Door, were built into the Walls of Moria in the dark cliffs."
    id={fieldId}
    label="Field Label"
  />
);

export default MyFormField;
```

## Canvas

<Canvas>
  <Story
    name="Custom"
    args={{
      children: (
        <Grid container spacing={2}>
          <Grid item xs={12}>
            <InputLabel>Name</InputLabel>
          </Grid>
          <Grid item xs={6}>
            <TextInput placeholder="First" />
          </Grid>
          <Grid item xs={6}>
            <TextInput placeholder="Last" />
          </Grid>
        </Grid>
      ),
    }}
  >
    {Template.bind({})}
  </Story>
  <Story
    name="NoInput"
    args={{
      helperText: "We didn't lose the input did we? Maybe the input lost us?!",
      label: "Not all those who wander are lost.",
    }}
  >
    {Template.bind({})}
  </Story>
  <Story
    name="TextInput"
    args={{
      field: <TextInput />,
      helperText:
        "All we have to decide is what to do with the time that is given us.",
      label: "Text Input",
    }}
  >
    {Template.bind({})}
  </Story>
</Canvas>
